<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nh·∫≠n di·ªán C·∫£m x√∫c AI</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <style>
        body {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-family: 'Arial', sans-serif;
            text-align: center;
        }

        .navbar {
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
        }

        .navbar-brand {
            font-size: 24px;
            font-weight: bold;
            color: white !important;
        }

        .container {
            margin-top: 50px;
        }

        .video-container {
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.3);
            background: black;
            padding: 10px;
            display: inline-block;
            transition: box-shadow 0.3s ease-in-out;
        }

        footer {
            margin-top: 30px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.8);
        }

        .footer-text {
            color: white;
            font-size: 14px;
        }
        .glow-happy { box-shadow: 0px 0px 50px 20px #FFD700; } /* M√†u v√†ng */
        .glow-sad { box-shadow: 0px 0px 50px 20px #1E90FF; } /* M√†u xanh */
        .glow-angry { box-shadow: 0px 0px 50px 20px #FF4500; } /* M√†u ƒë·ªè */
        .glow-surprise { box-shadow: 0px 0px 50px 20px #9400D3; } /* M√†u t√≠m */
        .glow-neutral { box-shadow: 0px 0px 50px 20px #808080; } /* M√†u x√°m */
    </style>
</head>
<body>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="#">üß† Nh·∫≠n di·ªán C·∫£m x√∫c AI</a>
        </div>
    </nav>
    
    <!-- N·ªôi dung ch√≠nh -->
    <div class="container">
        <h1 class="mt-4">Nh·∫≠n di·ªán C·∫£m x√∫c theo th·ªùi gian th·ª±c üé≠</h1>
        <p class="lead">H·ªá th·ªëng AI s·∫Ω ph√¢n t√≠ch bi·ªÉu c·∫£m khu√¥n m·∫∑t c·ªßa b·∫°n!</p>

        <!-- Video Stream -->
        <!-- Video Stream -->
        <div id="video-box" class="video-container">
            <img src="{{ url_for('video_feed') }}" width="640px">
        <!-- Hi·ªÉn th·ªã emoji c·∫£m x√∫c -->
        <div id="emotion-emoji" style="font-size: 80px; margin-top: 20px;">üòê</div>
    </div>

    </div>

    <!-- Footer -->
    <footer>
        <p class="footer-text">¬© 2025 Nh·∫≠n di·ªán C·∫£m x√∫c AI. All rights reserved.</p>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // H√†m c·∫≠p nh·∫≠t emoji t·ª´ API Flask
        function updateEmotion() {
            fetch("/current_emotion")  // G·ªçi API m·ªõi t·ª´ Flask
            .then(response => response.json())
            .then(data => {
                const emojiMap = {
                    "Happy": "üòÉ",
                    "Sad": "üò¢",
                    "Angry": "üò°",
                    "Fear": "üò®",
                    "Neutral": "üòê",
                    "Surprise": "üò≤",
                    "Disgust": "ü§¢"
                };
                document.getElementById("emotion-emoji").innerHTML = emojiMap[data.emotion] || "üòê";
            });
        }
        function updateGlowEffect() {
    fetch("/current_emotion")
    .then(response => response.json())
    .then(data => {
        let videoBox = document.getElementById("video-box");

        // X√≥a t·∫•t c·∫£ class tr∆∞·ªõc khi th√™m m·ªõi
        videoBox.classList.remove("glow-happy", "glow-sad", "glow-angry", "glow-surprise", "glow-neutral");

        let glowMap = {
            "Happy": "glow-happy",
            "Sad": "glow-sad",
            "Angry": "glow-angry",
            "Surprise": "glow-surprise",
            "Neutral": "glow-neutral"
        };

        if (glowMap[data.emotion]) {
            videoBox.classList.add(glowMap[data.emotion]);
        }
    });
}

        setInterval(updateGlowEffect, 2000); // C·∫≠p nh·∫≠t m·ªói 2 gi√¢y
        setInterval(updateEmotion, 1000); // C·∫≠p nh·∫≠t m·ªói gi√¢y
    </script>
</body>


</html>
